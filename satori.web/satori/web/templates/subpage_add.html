{% extends "templates/index.html" %}

{% block header %}
{% endblock %}

{% block content %}

{% if page_info.contest %}
<form action={% url contest_subpage_add page_info.contest.id %} method="POST">
{% else %}
<form action={% url subpage_add %} method="POST">
{% endif %}

{{ form.fid }}
<table class="subpage_form">
    <tr>
        <th><label for="id_name">{{ form.name.label }}</label></th>
        <td>{{ form.name }}</td>
        <td style="text-align: right">
            <input id="create_subpage" type="submit" value="Create subpage"/></td>
    </tr>
    {% if sphinxException %}
    <tr>
        <th></th>
        <td colspan="2" class="error_msg">{{ sphinxException }}</td>
    </tr>
    {% endif %}
    <tr>
        <th><label for="id_content">{{ form.content.label }}</label></th>
        <td colspan="2">{{ form.content }}</td>
    </tr>
    <tr>
        <th></th>
        <td colspan="2">
            <b>Quick Hint: </b>
            <i>To include an image into a new document use: ".. image:: image.jpg".
               To create a link inside a new document use: "`link title &lt;link address&gt;`"</i>
        </td>
    </tr>
    <tr>
        <th><label for="id_is_public">{{ form.is_public.label }}</label></th>
        <td>{{ form.is_public }}</td>
    </tr>
</table>
</form>
<h4>Attachments</h4>
<p>Click to select or drag-and-drop multiple files on the upload field:</p>
{% if page_info.contest %}
<form id="file_upload" action={% url contest_subpage_fileupload page_info.contest.id %} method="POST" enctype="multipart/form-data" class="file_upload">
{% else %}
<form id="file_upload" action={% url subpage_fileupload %} method="POST" enctype="multipart/form-data" class="file_upload">
{% endif %}
    <input type="file" name="file" multiple>
    {{ form.fid }}
    <button>Upload</button>
    <div>Attachments</div>
</form>
<table id="files"></table>
<script src="/files/scripts/attachments_upload.js"></script>
{% if page_info.contest %}
<script>createFileUploadInstance('{{ form.fid.value }}', '{% url contest_subpage_fileremove page_info.contest.id %}');</script>
{% else %}
<script>createFileUploadInstance('{{ form.fid.value }}', '{% url subpage_fileremove %}');</script>
{% endif %}
{% endblock %}
