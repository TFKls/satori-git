{% extends "templates/index.html" %}
{% load url from future %}
{% load bootstrap3 %}
{% block title %}
Configuration
{% endblock %}

{% block content %}


<p>
<span class="h4">Global subpages
<a class="btn btn-default btn-sm" href="{% url 'subpage_add' %}">Add new subpage</a>
</span>

</p>
<table class="table table-condensed table-hover">
<thead>
    <th>Name</th>
    <th>Visibility</th>
    <th></th>
</thead>
<tbody>
    {% for page in subpages.rows %}
    <tr>
        <td>{{page.name}}</td>
        <td>
            {% if page.visibility == 'admins' %}
            <span class="text-warning">
            {% endif %}

            {% if page.visibility == 'logged' %}
            <span class="text-info">
            {% endif %}


            {% if page.visibility == 'everyone' %}
            <span class="text-primary">
            {% endif %}
            
            {{ page.visibility }}
            </span>
            
            {% if page.is_public %}
            {% bootstrap_icon "globe" %}
            {% endif %}
        </td>
        <td>
            <a class="text-primary icon-space" href = "{% url 'subpage_edit' page.id %}">{% bootstrap_icon "edit" %}</a>
            {% if forloop.first %}
            <span class="text-muted icon-space">{% bootstrap_icon "chevron-up" %}</span>
            {% else %}
            <a class="text-primary icon-space" href = "{% url 'subpage_move' page.id 'up' %}">{% bootstrap_icon "chevron-up" %}</a>
            {% endif %}
            {% if forloop.last %}
            <span class="text-muted icon-space">{% bootstrap_icon "chevron-down" %}</span>
            {% else %}
            <a class="text-primary icon-space" href = "{% url 'subpage_move' page.id 'down' %}">{% bootstrap_icon "chevron-down" %}</a>
            {% endif %}

            <form action="{% url 'subpage_delete' %}" method="POST" class="one-button-form icon-space">
                <input type="hidden" name="id" value="{{page.id}}"/>
                <button type="submit"><span class="text-danger">{% bootstrap_icon "trash" %}</span></button>
                
            </form>

        </td>
    </tr>
    {% endfor %}
</tbody>
</table>





<h4>Problem setters</h4>
<table class="table table-condensed table-hover">
<thead>
    <th>Login</th>
    <th>Name</th>
    <th></th>
</tbody>
<tbody>
    {% for user in problemsetters.rows %}
    <tr>
        <td>{{user.login}}</td>
        <td>{{user.name}}</td>
        <td>
            <form action="{% url 'problemsetter_revoke' %}" class="one-button-form" method="POST">
                <input type="hidden" name="id" value="{{user.id}}"/>
                <button type="submit" class="btn btn-link">{% bootstrap_icon "remove" %}</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</tbody>
</table>

<div class="panel panel-default">
    <div class="panel-heading">Add problem setter:</div>
    <div class="panel-body">
    
        <form role="form" class="form form-inline" action="{% url 'problemsetter_grant' %}" method="POST">

        <div class="form-group">
            <label class="control-label">Login:</label>
            <input type="text" class="form-control" name="login"/>
        </div>

        <div class="form-group">
            <button class="btn btn-default" type="submit" class="button" name="add">Add</button>
        </div>

        </form>
    </div>

</div>


{% endblock %}
