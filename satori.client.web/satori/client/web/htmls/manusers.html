<h4>Global rights</h4>
<p>Here you can change the main contest rights.</p>
<form action="process.contestrights" method="POST">
    <input type="hidden" name="contest_id" value="{{ widget.contest.id }}"/>
    <input type="hidden" name="back_to" value="{{ widget.back_to }}"/>
    <input type="hidden" name="back_path" value="{{ widget.path }}"/>
    <table>
        <tr><td>Non-authenticated users may view:</td><td>
            <input type="checkbox" name="anonymous_view" {% if widget.anonymous_view %} checked {% endif %}/>
            </td></tr>
        <tr><td>Registered users may join:</td><td>
            <select name="joining_by">
                {% for optionno,optionname,selected in widget.joining_options %}
                    <option value="{{optionno}}" {% if selected %} selected {% endif %}>{{ optionname }}</option>
                {% endfor %}
            </select></td></tr>
        <tr><td></td><td><input type="submit" value="Set global rights"/></td></tr>
    </table>
</form>

<h4>Accepted users</h4>
<p>The list of all accepted users of this contest:</p>
<table class="tlist">
<tr><th>No.</th><th>Login</th><th>Full name</th><th>&nbsp</th></tr>
{% for q in widget.accepted %}
<tr>
    <th>{{forloop.counter}}.</th>
    <td>
    {% for u in q.members %}
        {{u.login}} <br/>
    {% endfor %}
    </td>
    <td>
    {% for u in q.members %}
        {{u.fullname}} <br/>
    {% endfor %}
    </td>
    <td>
        {{q.admin}}
    </td>
</tr>
{% endfor %}
</table>

<h4>Pending users</h4>
<p>The list of pending accepted users of this contest:</p>
<table class="tlist">
<tr><th>No.</th><th>Login</th><th>Full name</th><th>&nbsp</th></tr>
{% for cu, members in widget.pending %}
<tr>
    <th>{{forloop.counter}}.</th>
    <td>
    {% for u in members %}
    {{u.login}} <br/>
    {% endfor %}
    </td>
    <td>
    {% for u in members %}
    {{u.fullname}} <br/>
    {% endfor %}
    </td>
    <td>
        <form action="process.accept" method="post">
            <input type="hidden" name="conuser_id" value="{{ cu.id }}"/>
            <input type="hidden" name="back_to" value="{{ widget.back_to }}"/>
            <input type="hidden" name="back_path" value="{{ widget.path }}"/>
            <input type="submit" value="Accept" class="button"/>
        </form>   
    </td>
</tr>
{% endfor %}
</table>

<h4>Add user</h4>
        <form action="process.addcontestant" method="post">
            Username:
            <input type="text" name="login"/>
            <br/>
            Add user as 
            <select name="addrole">
                <option value="contestant">Contestant</option>
                <option value="admin">Admin</option>
            </select>
            <input type="hidden" name="cid" value="{{ widget.contest.id }}"/>
            <input type="hidden" name="back_to" value="{{ widget.back_to }}"/>
            <input type="hidden" name="back_path" value="{{ widget.path }}"/>
            <input type="submit" value="Add" class="button"/>
        </form>  
